process {
    withName: 'SOURMASH_FASTMULTIGATHER' {
        ext.args = ''   // Custom arguments for sourmash fastmultigather
        ext.prefix = '' // Custom prefix for output files
    }

    withName: 'SOURMASH_MANYSKETCH' {
        ext.args_sourmash = '' // Custom arguments for sourmash manysketch
        ext.args_python = ''   // Custom arguments for the Python script 0_zip_with_ksize_ok.py
    }

    withName: 'YACHT_RUN' {
        ext.args = '' // Custom arguments for yacht run
        // ext.prefix = '' // You can also set a custom prefix here if needed
    }

    withName: 'MERGE_PAIREDENDSEQS' {
        ext.prefix = '' // Custom prefix for the merged directory and file
    }

    withName: 'PROCESS_READBASED_RESULTS' {
        // ext.prefix = '' // Custom prefix if the Python scripts support it
        ext.py_args_script1 = '' // Arguments for 1_process_sourmash.py
        ext.py_args_script2 = '' // Arguments for 2_process_yacht.py
        ext.py_args_script3 = '' // Arguments for 3_concat_yacht.py
        ext.py_args_script4 = '' // Arguments for 4_merged_yacht_sourmash.py
    }

    // Args for QC and Preprocessing modules
    withName: 'FASTQC_RAW|FASTQC_TRIMMED|FASTQC_RMHOST' { // Applies to all FASTQC calls
        ext.args = '' // e.g. '--noextract'
    }

    // withName: 'MULTIQC_RAW|MULTIQC_TRIMMED|MULTIQC_RMHOST' { // Applies to all MULTIQC calls
    //     ext.args = '' // e.g. '--comment "Raw reads QC"'
    //                   // Note: use specific blocks if different args are needed for different stages
    // }

    withName: 'FASTP' { // Your existing settings are good
        ext.args = '--trim_front1 5 --trim_front2 5 --trim_tail1 1 --trim_tail2 1 --unqualified_percent_limit 100 --trim_poly_x --poly_x_min_len 10 --n_base_limit 0 --low_complexity_filter --length_required 65'
    }

    withName: 'HOSTILE_FETCH' {
        // Default args for HOSTILE_FETCH if params.hostile_reference is not set
        // User provided: --name human-t2t-hla.argos-bacteria-985_rs-viral-202401_ml-phage-202401
        ext.args = params.hostile_fetch_args ?: '--name human-t2t-hla.argos-bacteria-985_rs-viral-202401_ml-phage-202401'
    }

    withName: 'HOSTILE_CLEAN' {
        ext.args = params.hostile_clean_args ?: '--debug' // Default, user can override via params.hostile_clean_args
    }

    // Catch-all for any other SOURMASH processes if needed
    withName: 'SOURMASH.*' {
        ext.args = ext.args ?: '' // Preserve existing if any, or default to empty
    }
}