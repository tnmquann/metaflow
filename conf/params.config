params {
    // Cleanup configuration
    cleanup = false
    cleanup_patterns = [
        'work',
        'intermediate_files',
        '.nextflow*',
        '.command.*',
        'process_tmp'
    ]
    
    // Optional email configuration
    email = null

    // Tool-specific arguments
    hostile_fetch_args = null
    hostile_clean_args = '--debug'
}

// Process-specific parameters
process {
    withName: 'CREATE_READS_CSV' {
        ext.args = ''   // Custom arguments for CSV creation
        ext.prefix = '' // Custom prefix
    }

    withName: 'SOURMASH_FASTMULTIGATHER_META' {
        // Override ksize if needed (default: params.sourmash_ksize = 31)
        ext.ksize = ''
        // Override threshold-bp if needed (default: params.sourmash_thresholdbp or 50000)
        ext.args = ''
        ext.prefix = '' // Custom prefix for output files
    }

    withName: 'SOURMASH_FASTMULTIGATHER_BINS' {
        // Override ksize if needed (default: params.sourmash_ksize = 51)
        ext.ksize = ''
        // Override threshold-bp if needed (default: params.sourmash_thresholdbp or 50000)
        ext.args = ''
        ext.prefix = '' // Custom prefix for output files
    }

    withName: 'SOURMASH_TAXANNOTATE_META' {
        ext.args = ''   // Custom arguments for sourmash tax annotate
    }

    withName: 'SOURMASH_TAXMETAGENOME' {
        ext.args = ''   // Custom arguments for sourmash tax metagenome
    }

    withName: 'SOURMASH_MANYSKETCH_META' {
        ext.args_sourmash = '' // Custom arguments for sourmash manysketch
    }

    withName: 'YACHT_RUN' {
        ext.args = '' // Custom arguments for yacht run
    }

    withName: 'YACHT_RUN_SINGLESKETCH' {
        ext.args = '' // Custom arguments for yacht run in single-sample mode
    }

    withName: 'MERGE_PAIREDENDSEQS' {
        ext.prefix = '' // Custom prefix for merged files
    }

    withName: 'PROCESS_READBASED_RESULTS' {
        ext.py_args_script1 = '' // Arguments for Python scripts
        ext.py_args_script2 = ''
        ext.py_args_script3 = ''
        ext.py_args_script4 = '--remove_unclassified --min_coverage 0.05'
    }

    withName: 'PROCESS_READBASED_RESULTS_SINGLESKETCH' {
        ext.py_args_script1 = '' // Arguments for Python scripts (single-sample mode)
        ext.py_args_script2 = ''
        ext.py_args_script4 = '--remove_unclassified --min_coverage 0.05'
    }

    withName: 'SOURMASH_SKETCH_META' {
        // Default sourmash sketch parameters matching sourmash_profile
        ext.args = ''
    }

    withName: 'SOURMASH_GATHER_META' {
        ext.args = '' // Custom arguments for sourmash gather
    }

    withName: 'EXTRACT_SOURMASH_SINGLESKETCHES_META' {
        ext.args_python = ''   // Custom arguments for Python extraction script
    }

    withName: 'FASTQC_RAW|FASTQC_TRIMMED|FASTQC_RMHOST' {
        ext.args = ''
    }

    withName: 'FASTP' {
        ext.args = '--trim_front1 5 --trim_front2 5 --trim_tail1 1 --trim_tail2 1 --unqualified_percent_limit 30 --trim_poly_x --poly_x_min_len 8 --n_base_limit 5 --low_complexity_filter --length_required 65 --detect_adapter_for_pe --correction --overrepresentation_analysis --cut_right --cut_right_window_size 4 --cut_right_mean_quality 20'
    }

    withName: 'HOSTILE_FETCH' {
        ext.args = params.hostile_fetch_args ?: '--name human-t2t-hla'
    }

    withName: 'HOSTILE_CLEAN' {
        ext.args = params.hostile_clean_args ?: '--debug'
    }

    withName: 'RGI_BWT' {
        
    }

    withName: 'RGI_PREPARECARDDB' {
        ext.args = params.rgi_preparecarddb_args ?: ''
    }

    withName: 'BOWTIE2_ASSEMBLY_ALIGN' {
        ext.args = '' // Custom arguments for bowtie2 alignment (e.g., '--very-sensitive')
    }

    withName: 'BWAMEM2_ASSEMBLY_MEM' {
        ext.args = '' // Custom arguments for bwamem2 alignment
    }

    withName: 'SOURMASH_TAXANNOTATE' {
        ext.args = ''   // Custom arguments for sourmash tax annotate
    }

    withName: 'SOURMASH_TAXGENOME' {
        ext.args = ''   // Custom arguments for sourmash tax genome
    }

    withName: 'CREATE_BINS_CSV' {
        ext.args = ''   // Custom arguments for CSV creation
        ext.prefix = '' // Custom prefix
    }

    withName: 'COMBINE_FASTMULTIGATHER_RESULTS' {
        ext.args = ''   // Custom arguments for combining results
    }

    withName: 'EXTRACT_SOURMASH_SINGLESKETCHES' {
        ext.args_python = ''   // Custom arguments for Python extraction script
    }
}
